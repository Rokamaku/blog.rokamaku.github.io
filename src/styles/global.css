:root {
  --uno-colors-primary: theme('colors.primary');
  --uno-colors-secondary: theme('colors.secondary');
  --uno-colors-background: theme('colors.background');
}

html {
  --at-apply: 'bg-background c-secondary antialiased';
  position: relative;
  background-color: #333;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Background image with overlay */
html::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('/images/backgrounds/light/dominik-schroder-FIKD9t5_5zQ-unsplash.jpg');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-repeat: no-repeat;
  opacity: 0.9; /* Make image less intense */
  z-index: -1;
  filter: blur(8px);
  transition: background-image 1s ease-in-out;
}

html.dark::before {
  background-image: url('/images/backgrounds/dark/bence-halmosi-tOJlSyyOtPU-unsplash.jpg');
  opacity: 0.9; /* Make dark image even less intense */
}

body {
  --at-apply: 'ios-flash-fix';
  position: relative;
}

/* Style for post content to make it more readable */
.heti p, .heti li, .heti blockquote {
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
  color: #333;
}

html.dark .heti p,
html.dark .heti li,
html.dark .heti blockquote {
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
  color: #eee;
}

.heti h1, .heti h2, .heti h3, .heti h4 {
  color: #222;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}

html.dark .heti h1,
html.dark .heti h2,
html.dark .heti h3,
html.dark .heti h4 {
  color: #fff;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 1);
}

/* Main content container */
body > div {
  transition: background-color 0.5s ease-in-out, box-shadow 0.5s ease-in-out;
  position: relative;
  z-index: 10;
}

/* View Transition with Theme Toggle >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> */
::view-transition-new(theme-transition) {
  animation: reveal 1s cubic-bezier(0.4, 0, 0.2, 1);
  clip-path: inset(0 0 0 0);
  z-index: 99;
}

::view-transition-old(theme-transition) {
  animation: none;
  z-index: -1;
}

@keyframes reveal {
  from {
    clip-path: inset(var(--from));
  }
}

html.dark {
  --from: 0 0 100% 0;
}

html:not(.dark) {
  --from: 100% 0 0 0;
}

/* Disable animations for other elements during theme switching */
html[data-theme-transition] [data-disable-transition-on-theme] {
  view-transition-name: none !important;
}

/* Fallback animation when view-transition-name is not supported */
@supports not (view-transition-name: none) {
  html:not([data-restore-theme]) {
    --at-apply: 'transition-colors duration-300 ease-out';
  }
}

/* Import Custom Fonts >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> */
/* Snell Roundhand Static Font */
@font-face {
  font-family: "Snell-Bold";
  src: url("/font/Snell-Bold.woff2") format("woff2");
  font-display: swap;
  unicode-range: U+0030-0039,U+0041-005A,U+0061-007A,U+00C1,U+00C9,U+00CD,U+00D3,U+00DA,U+00DC,U+00D1,U+00E1,U+00E9,U+00ED,U+00F3,U+00FA,U+00FC,U+00F1,U+0410-044F,U+0401,U+0451,U+0021-002F,U+003A-0040,U+00A9;
}

@font-face {
  font-family: "Snell-Black";
  src: url("/font/Snell-Black.woff2") format("woff2");
  font-display: swap;
  unicode-range: U+0030-0039,U+0041-005A,U+0061-007A,U+00C1,U+00C9,U+00CD,U+00D3,U+00DA,U+00DC,U+00D1,U+00E1,U+00E9,U+00ED,U+00F3,U+00FA,U+00FC,U+00F1,U+0410-044F,U+0401,U+0451,U+0021-002F,U+003A-0040,U+00A9;
}

/* STIXTwoText Variable Font */
@font-face {
  font-family: "STIX";
  src: url("/font/STIX.woff2") format("woff2-variations");
  font-display: swap;
  font-weight: 400 700;
  unicode-range: U+0030-0039,U+0041-005A,U+0061-007A,U+00C1,U+00C9,U+00CD,U+00D3,U+00DA,U+00DC,U+00D1,U+00E1,U+00E9,U+00ED,U+00F3,U+00FA,U+00FC,U+00F1,U+0410-044F,U+0401,U+0451,U+0021-002F,U+003A-0040,U+00A9;
}

@font-face {
  font-family: "STIX-Italic";
  src: url("/font/STIX-Italic.woff2") format("woff2-variations");
  font-display: swap;
  font-weight: 400 700;
  unicode-range: U+0030-0039,U+0041-005A,U+0061-007A,U+00C1,U+00C9,U+00CD,U+00D3,U+00DA,U+00DC,U+00D1,U+00E1,U+00E9,U+00ED,U+00F3,U+00FA,U+00FC,U+00F1,U+0410-044F,U+0401,U+0451,U+0021-002F,U+003A-0040,U+00A9;
}

/* Minimal Subset of EarlySummerSerif Variable Font */
@font-face {
  font-family: "EarlySummer-Subset";
  src: url("/font/EarlySummer-Subset.woff2") format("woff2-variations");
  font-display: swap;
  font-weight: 400 700;
}

/* Global overrides for highest priority */
#main-container {
  background-color: rgba(255, 255, 255, 0.95) !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3) !important;
  backdrop-filter: blur(15px) !important;
  border: 1px solid rgba(255, 255, 255, 0.5) !important;
}

html.dark #main-container {
  background-color: rgba(30, 30, 50, 0.9) !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5) !important;
  border: 1px solid rgba(80, 80, 120, 0.5) !important;
}

/* Make sure post list items are visible */
ul > li {
  background-color: rgba(255, 255, 255, 0) !important;
  box-shadow: none !important;
  border: none !important;
  /* margin-bottom: 1.5rem !important; */
  /* padding: 1rem !important; */
  /* border-radius: 0.5rem !important; */
}

html.dark ul > li {
  background-color: rgba(255, 255, 255, 0) !important;
  box-shadow: none !important;
  border: none !important;
}

/* Ensure links are visible */
ul > li a {
  color: #333 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5) !important;
  font-weight: bold !important;
}

html.dark ul > li a {
  color: #fff !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8) !important;
}

/* Enhanced Table of Contents styling */
@media (min-width: 1536px) {
  #toc-content,
  .accordion-content,
  div[class*="accordion-content"] {
    background-color: rgba(173, 209, 216, 0.1) !important; /* #ADD1D8 with more transparency */
    backdrop-filter: blur(10px) !important;
    border-radius: 8px !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
    border: 1px solid rgba(143, 178, 188, 0.4) !important; /* More transparent, subtle border */
    padding: 15px !important;
    margin-top: 10px !important;
  }

  html.dark #toc-content,
  html.dark .accordion-content,
  html.dark div[class*="accordion-content"] {
    background-color: rgba(28, 42, 57, 0.85) !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
    border: 1px solid rgba(70, 90, 120, 0.5) !important;
  }

  .toc-header {
    display: none !important;
  }

  .toc-list li {
    margin: 5px 0 !important;
    padding: 3px 5px !important;
    border-radius: 4px !important;
    transition: all 0.2s ease !important;
    line-height: 1.4 !important;
  }

  .toc-list li[class*="ml-4"] {
    margin-left: 12px !important;
    padding-left: 10px !important;
  }

  .toc-list li[class*="ml-8"] {
    margin-left: 24px !important;
    padding-left: 10px !important;
  }

  html.dark .toc-list li[class*="ml-4"],
  html.dark .toc-list li[class*="ml-8"] {
    border-left: none !important;
  }

  .toc-list li:hover {
    background-color: rgba(255, 255, 255, 0.4) !important;
    transform: translateX(3px) !important;
  }

  html.dark .toc-list li:hover {
    background-color: rgba(60, 70, 100, 0.5) !important;
  }

  .toc-link-h2, .toc-link-h3, .toc-link-h4 {
    --at-apply: 'text-3.2 font-normal text-balance select-none transition-colors ease-in hover:(font-medium)';
    color: #2c3e50 !important;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) !important;
    display: block !important;
    padding: 2px 5px !important;
    text-decoration: none !important;
  }

  html.dark .toc-link-h2,
  html.dark .toc-link-h3,
  html.dark .toc-link-h4 {
    color: #dee2e6 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
  }

  .toc-link-active {
    font-weight: 600 !important;
    color: #1a5fb4 !important;
  }

  html.dark .toc-link-active {
    color: #8cb4f5 !important;
  }
}
